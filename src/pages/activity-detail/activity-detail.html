<ion-header>
  <ion-navbar>
    <ion-title>{{ activityObject?.clientName }}</ion-title>
    <ion-buttons end (click)="deleteActivity()">
      <button ion-button>
        <ion-icon ios="ios-trash" md="md-trash"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding class="forms-validations-content">
  <form class="sample-form validations-form" [formGroup]="activityForm"  (ngSubmit)="updateActivity(activityForm.value)">
    <section class="form-section">
      <h2 class="section-title">Klantgegevens</h2>
      <ion-item>
        <ion-label floating>Naam van klant</ion-label>
        <ion-input name="clientName" type="text" formControlName="clientName" [(ngModel)]="activityObject.clientName" 
          class="form-controll" required></ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validation_messages.clientName">
          <div class="error-message" *ngIf="activityForm.get('clientName').hasError(validation.type) 
            && (activityForm.get('clientName').dirty || activityForm.get('clientName').touched)">
            {{ validation.message }}
          </div>
        </ng-container>
      </div>

      <ion-item>
        <ion-label floating>Locatie</ion-label>
        <ion-input name="location" type="text" formControlName="location" [(ngModel)]="activityObject.location" 
          class="form-controll" required></ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validation_messages.location">
          <div class="error-message" *ngIf="activityForm.get('location').hasError(validation.type) 
            && (activityForm.get('location').dirty || activityForm.get('location').touched)">
            {{ validation.message }}
          </div>
        </ng-container>
      </div>
    </section>

    <section class="form-section">
      <h2 class="section-title">Tijden</h2>

      <ion-item>
        <ion-label floating>Begonnen om</ion-label>
        <ion-datetime 
          (ionChange)="calculateHours(activityForm.value.startTime, activityForm.value.endTime)"  
          displayFormat="HH:mm" 
          minuteValues="0,15,30,45"
          formControlName="startTime"
          [(ngModel)]="activityObject.startTime" 
          cancelText=Annuleer 
          doneText=Klaar></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label floating>Gestopt om</ion-label>
          <ion-datetime 
              (ionChange)="calculateHours(activityForm.value.startTime, activityForm.value.endTime)"
              displayFormat="HH:mm"
              minuteValues="0,15,30,45" 
              formControlName="endTime"
              [(ngModel)]="activityObject.endTime"
              cancelText=Annuleer 
              doneText=Klaar>
          </ion-datetime>
      </ion-item>
    </section>
   
    <!-- <section class="form-section">
      <h2 class="section-title">Werkzaamheden</h2>
        <div *ngFor="let activity of activityObject.activities">
        
          <ion-item>
            <ion-label floating>Taak</ion-label>
            <ion-input type="text" class="form-controll" maxlength="50"></ion-input>
          </ion-item>

          <span float-right ion-button icon-left clear
              (click)="removeInputField(i)">
              <ion-icon name="close"></ion-icon>
              Verwijder
          </span>
        </div>
        
    </section> -->

    <button ion-button full type="submit" [disabled]="!activityForm.valid">Opslaan</button>
  </form>
</ion-content>